# 神灯作弊器

```
首先説明：使用需谨慎，本修改器未经过完善测试，可能带来BUG
这是预期将是一个通用修改器
```

## 更新说明

### 4.8更新

- [x] 添加任意情报
- [x] 可以添加指定裝備
- [x] 添加任意道具
- [x] 提升能力
- [x] 添加金钱
- [x] 添加金骰子、善名等

### 4.9更新

- [x] 强制触发事件（events，不一定都能生效，未测试完全）
- [x] 添加自动化安装脚本
- [x] 修复频繁弹出的bug
- [x] 修改道具的分页数目
- [x] 在选择过程中，添加返回

### 4.10更新

- [x] 邀请任意角色
- [x] 提升任意卡的品质
- [x] 烧毁任意卡
- [x] 更精确的控制金币，善名等的点数

### 4.12更新

#### 更新

- [x] 给角色添加任意TAG
- [x] 选择苏丹卡
- [x] 降低任意卡的品质
- [x] 重置了属性提升
- [x] 复制卡
- [ ] 延长卡的时限
- [ ] 存档
- [ ] 游戏内修改速度

#### 修复

- [x] 修复选择道具上下页颠倒的bug
- [x] 修复法拉杰和铁头等人添加后不能正确使用的bug



## 使用説明

### 准备

双击startup.bat，输入游戏路径，一键使用

> 脚本没法运行大概率是编码的问题，解决方式如下
>
> 1. 在mod位置新建一个a.txt文件
> 2. 把startup.bat的内容复制到这个txt中
> 3. 把a.txt改名为 a.bat
> 4. 双击运行
>
> 然后，如果你手动复制文件，一定要关注rite和event中的子文件夹，正确的做法是先把rite,event中子文件夹下所有的json文件放到rite或者event中，然后再整个拖到游戏文件下。
>

### 开始使用

游戏开始，会问你是否需要神的援助，接受则获得一个神灯。

你的命运商店里会多出两个道具：

1. 撒旦的种子

2. 事件召唤卡（用于强制触发事件）

   

将神灯拖入俺寻思，在家宅触发仪式，拖入对应的位置即可实现道具，角色或者金钱以及其他内容的获取。每回合可以无限使用

将事件召唤卡拖入俺寻思，在神殿触发仪式，随便放入什么，根据首字母选择仪式，然后等待一回合即可触发部分仪式

将神撒旦种子拖入俺寻思，在神殿触发仪式，烧卡

如果需要在游戏中加入该mod，把主角拖入寻思即可。



## 在CARRADA数据集上的补充

## benchmark

|            |                        | RA       |          | RD       |          |
| ---------- | ---------------------- | -------- | -------- | -------- | -------- |
| Methods    | Publication            | mIoU     | mDice    | mIoU     | mDice    |
| FCN-8s     |                        | 34.5     | 40.9     | 54.7     | 66.3     |
| U-Net      |                        | 32.8     | 40.9     | 55.4     | 68.0     |
| DeepLabv3+ |                        | 32.7     | 38.3     | 50.8     | 61.6     |
| RSS-Net    |                        | 32.1     | 37.8     | 32.1     | 36.9     |
| RAMP-CNN   |                        | 27.9     | 30.5     | 56.6     | 68.5     |
| MVNet      | ICCV 2021              | 26.8     | 28.5     | 29.0     | 32.8     |
| TMVA-Net   | ICCV 2021（benchmark） | 41.3     | 51.0     | 58.7     | 70.9     |
| T-RODNet   | TIM 2023               | 43.5     | 53.6     | --       | --       |
| PeakConv   | CVPR 2023              | 42.9     | 53.3     | 60.7     | 72.5     |
| TransRadar | WACV 2024              | **47.5** | **59.3** | **63.9** | **75.6** |

## 实验

|                             |                   | RA       |          | RD   |       |
| --------------------------- | ----------------- | -------- | -------- | ---- | ----- |
| Experiment                  | Pretrained weight | mIoU     | mDice    | mIoU | mDice |
| RADSeg                      | --                | 37.6     | 39.2     | 45.7 | 47.3  |
| RADSeg+CVCM                 | RADDet dataset    | 38.3     | 46.5     | 34.5 | 41.6  |
| RADSeg(RA)                  | --                | **43.7** | **54.0** | --   | --    |
| RADSeg(RA)+CVCM             | Carrada dataset   | 39.6     | 48.0     | --   | --    |
| RADSeg(RA)+CVCM             | RADDet dataset    | 39.4     | 47.7     | --   | --    |
| RADSeg+CVCM(筛选正负样本)   | Carrada dataset   | 40.5     | 50.4     | 36.8 | 45.4  |
| RADSeg+CVCM(不筛选正负样本) | Carrada dataset   | 39.4     | 47.8     | 38.2 | 47.3  |

## 产生问题的原因

对于一个batch中的任意一帧，CVCM方法会将所有其余帧视为负样本。如batch_size为4，则帧的label为[1,2,3,4]。这在不同场景间差异较大的数据集上是可行的（如RADDet）。但对于某些图像间差异较小的数据集，这样的正负样本选取方式会存在问题，从而导致最终对比学习效果不佳。以carrada为例，由于carrada数据集源于对一个场景的连续取景，经常出现相邻多帧之间rgb图像差异小，但雷达的ra,rd,ad三视图差异较大的情况，尤其对于后两个带有多普勒维度的视图。典型的情景是远处的车辆急刹车，在该情境下，相邻帧的img，ra差异较小，在对比学习中完全能够视为正样本，但rd，ad差异较大，难以视为正样本。这就对正负样本的选择带来了困难。我们尝试了将邻近且颜色直方图相似的帧视为正样本，但训练效果不佳。
